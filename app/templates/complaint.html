{% extends 'layout.html' %}
{% block content %}
    <div id="compcontent">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <table id="displayusr" style="width:960px; color: #73000d">
                <tr>
                    <th colspan="1" style="text-align:left ">Update Complaint Form</th>
                    <th colspan="1" style="text-align:right ">{% set ulist = current_user.username.split(".") %}
                    {% if ulist|length == 1 %}
                    {{ ulist[0]|capitalize() }} - {{ current_user.id }}
                    {% else %}
                    {{ ulist[0]|capitalize() }} {{ ulist[1]|capitalize() }} - {{ current_user.id }}
                    {% endif %}</th>
                </tr>
            </table>
               <table id="newcomptable">
                   <tr>
                       <th colspan="1"><legend id="lgdagrinfo">Agreement Information</legend></th>
                       <th colspan="1"><legend id="lgdcusinfo">Customer Information</legend></th>
                       <th colspan="1"><legend id="lgdcompinfo">Complaint Information</legend></th>
                   </tr>
                       <tr>
                            <td>
                                <fieldset id="fsagrinfo" class="clsfieldset">
                                    <div id="aggr_no" class="inline-group">
                                        {{ form.agreement_no.label(class="text-info clslabel") }}
                                        {% if form.agreement_no.errors %}
                                            {{ form.agreement_no(class="form-control form-control-md clsfeild is-invalid", value=complaint.agreement_no, readonly='readonly') }}
                                            <div class="invalid-feedback">
                                            {% for error in form.agreement_no.errors %}
                                                <span>{{ 'Please enter agreement no' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.agreement_no(class="form-control form-control-md clsfeild",value=complaint.agreement_no, readonly='readonly') }}
                                        {% endif %}
                                    </div>
                                    <div id="manu" class="inline-group">
                                        {{ form.manufacturer.label(class="text-info clslabel") }}
                                        {% if form.manufacturer.errors %}
                                            {{ form.manufacturer(class="form-control form-control-md clsfeild is-invalid", value=complaint.manufacturer, readonly='readonly') }}
                                            <div class="invalid-feedback">
                                            {% for error in form.manufacturer.errors %}
                                            <span>{{ 'Please select a manufacturer' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.manufacturer(class="form-control form-control-md clsfeild", value=complaint.manufacturer, readonly='readonly') }}
                                        {% endif %}
                                    </div>
                                    <div id="mdl" class="inline-group">
                                        {{ form.model.label(class="text-info clslabel") }}
                                        {% if  form.model.errors %}
                                            {{ form.model(class="form-control form-control-md clsfeild is-invalid", value=complaint.model, readonly='readonly') }}
                                            <div class="invalid-feedback">
                                            {% for error in form.model.errors  %}
                                                <span>{{ 'Please select a model' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.model(class="form-control form-control-md clsfeild", value=complaint.model, readonly='readonly') }}
                                        {% endif %}
                                    </div>
                                    <div id="prd" class="inline-group">
                                        {{ form.product.label(class="text-info clslabel") }}
                                        {% if form.product.errors %}
                                            {{ form.product(class="form-control form-control-md clsfeild is-invalid", value=complaint.product, readonly='readonly') }}
                                            <div class="invalid-feedback">
                                            {% for error in form.product.errors  %}
                                                <span>{{ 'Please select a product' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.product(class="form-control form-control-md clsfeild", value=complaint.product, readonly='readonly') }}
                                        {% endif %}
                                    </div>
                                    <div id="va" class="inline-group">
                                        {{ form.vehicle_age.label(class="text-info clslabel") }}
                                        {% if form.vehicle_age.errors %}
                                            {{ form.vehicle_age(class="form-control form-control-md clsfeild is-invalid", value=complaint.vehicle_age, readonly='readonly') }}
                                            <div class="invalid-feedback">
                                            {% for error in form.vehicle_age.errors %}
                                                <span>{{ 'Please select a vehicle age' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.vehicle_age(class="form-control form-control-md clsfeild", value=complaint.vehicle_age, readonly='readonly') }}
                                        {% endif %}
                                    </div>
                                    <div id="ctr" class="inline-group">
                                        {{ form.centre.label(class="text-info clslabel") }}
                                        {{ form.centre(class="form-control form-control-md clsfeild", value=complaint.centre, readonly='readonly') }}
                                    </div>
                                </fieldset>
                            </td>
                            <td>
                                <fieldset class="clsfieldset">
                                    <div class="inline-group">
                                        {{ form.company.label(class="text-info clslabel") }}
                                        {{ form.company(class="form-control form-control-md clscusinfo", value=complaint.company, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.title.label(class="text-info clslabel") }}
                                        {{ form.title(class="form-control form-control-md clsfeild", value=complaint.title, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.first_name.label(class="text-info clslabel") }}
                                        {{ form.first_name(class="form-control form-control-md clscusinfo", value=complaint.first_name, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.middle_name.label(class="text-info clslabel") }}
                                        {{ form.middle_name(class="form-control form-control-md clscusinfo", value=complaint.middle_name, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.last_name.label(class="text-info clslabel") }}
                                        {{ form.last_name(class="form-control form-control-md clscusinfo", value=complaint.last_name, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.email.label(class="text-info clslabel") }}
                                        {{ form.email(class="form-control form-control-md clscusinfo", value=complaint.email, readonly='readonly') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.contact_no.label(class="text-info clslabel") }}
                                        {{ form.contact_no(class="form-control form-control-md clscusinfo", value=complaint.contact_no, readonly='readonly') }}
                                    </div>
                                </fieldset>
                            </td>
                            <td>
                                <fieldset class="clsfieldset">
                                    <div id="cid" class="inline-group">
                                        {{ form.complaint_no.label(class="text-info clslabel") }}
                                        {{ form.complaint_no(class="form-control form-control-md text-inline border-0 clsfeild", value=complaint.id, readonly="readonly") }}
                                    </div>
                                    <div id="compgrp" class="inline-group">
                                        {{ form.complaint_group.label(class="text-info clslabel") }}
                                        {% if form.complaint_group.errors %}
                                            {{ form.complaint_group(class="form-control form-control-md clsfeild is-invalid", value=complaint.complaint_group, readonly='readonly')}}
                                            <div class="invalid-feedback">
                                            {% for error in form.complaint_group.errors %}
                                                <span>{{ 'Please select a app group' }}</span>
                                            {% endfor %}
                                            </div>
                                        {% else %}
                                            {{ form.complaint_group(class="form-control form-control-md clsfeild", value=complaint.complaint_group, readonly='readonly') }}
                                        {% endif %}
                                    </div>
{#                                    <div id="compsrc" class="inline-group">#}
{#                                        {{ form.complaint_source.label(class="text-info clslabel") }}#}
{#                                        {% if form.complaint_source.errors %}#}
{#                                            {{ form.complaint_source(class="clsfeild is-invalid", readonly='readonly') }}#}
{#                                            <div class="invalid-feedback">#}
{#                                            {% for error in form.complaint_source.errors %}#}
{#                                                <span>{{ 'Please select a app source' }}</span>#}
{#                                            {% endfor %}#}
{#                                            </div>#}
{#                                        {% else %}#}
{#                                            {{ form.complaint_source(class="clsfeild", readonly='readonly') }}#}
{#                                        {% endif %}#}
{#                                    </div>#}
                                   <div id="compserv" class="inline-group">
                                        {{ form.severity.label(class="text-info clslabel") }}
                                       {% if form.severity.errors %}
                                           {{ form.severity(class="selectpicker clsfeild", value=complaint.severity, selected="selected") }}
                                           <div class="invalid-feedback">
                                           {% for error in form.severity.errors %}
                                               <span>{{ 'Please select app severity' }}</span>
                                           {% endfor %}
                                           </div>
                                       {% else %}
                                           {{ form.severity(class="selectpicker clsfeild", value=complaint.severity,selected="selected") }}
                                       {% endif %}
                                    </div>
                                   <div id="compsts" class="inline-group">
                                        {{ form.complaint_status.label(class="text-info clslabel") }}
                                        {{ form.complaint_status(class="clsfeild") }}
                                   </div>
                                    <div id="daterec" class="inline-group">
                                        {{ form.date_received.label(class="text-info clslabel") }}
                                        {{ form.date_received(class="form-control form-control-md clsfeild", value=complaint.date_received, readonly='readonly') }}
                                    </div>
                                    <div id="resdate" class="inline-group">
                                        {{ form.reg_due_date.label(class="text-info clslabel") }}
                                        {{ form.reg_due_date(class="form-control form-control-md clsfeild",value=complaint.reg_due_date, readonly="readonly") }}
                                    </div>
{#                                    <div id="moddate" class="inline-group">#}
{#                                        {{ form.date_modified.label(class="text-info clslabel") }}#}
{#                                        {{ form.date_modified(class="clsfeild",value=current_date, readonly="readonly") }}#}
{#                                    </div>#}
                                    <div class="inline-group">
                                        {{ form.goodwill_offered.label(class="text-info clslabel") }}
                                        {{ form.goodwill_offered(class="selectpicker clsfeild", value='No', selected='selected') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.goodwill_reason.label(class="text-info clslabel") }}
                                        {{ form.goodwill_reason(class="form-control form-control-md clsfeild", value='') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.goodwill_method.label(class="text-info clslabel") }}
                                        {{ form.goodwill_method(class="form-control form-control-md clsfeild", value='') }}
                                    </div>
                                    <div class="inline-group">
                                        {{ form.goodwill_amount.label(class="text-info clslabel") }}
                                        {{ form.goodwill_amount(class="form-control form-control-md clsfeild", value='') }}
                                    </div>
                                </fieldset>
                            </td>
                            </tr>
                           <tr>
                                <th colspan="3">{{ form.complaint_narrative.label(class="text-info") }}</th>
                           </tr>
                               <tr>
                                    <td colspan="3">
                                        <fieldset id="fscompinfo">
                                            <div class="form-control-plaintext">
                                                {{ form.complaint_narrative(class="form-control clscompnarr", maxlength="200", readonly='readonly')}}
                                            </div>
                                        </fieldset>
                                    </td>
                                </tr>
                            <tr>
                           <tr>
                                <th colspan="3">{{ form.goodwill_narrative.label(class="text-info", placeholder="") }}</th>
                           </tr>
                           <tr>
                                <td colspan="3">
                                    <fieldset id="fscompinfo">
                                        <div class="form-control-plaintext">
                                            {{ form.goodwill_narrative(class="form-control clscompnarr", maxlength="200")}}
                                        </div>
                                    </fieldset>
                                </td>
                           </tr>
                           <tr>
                                <th></th>
                           </tr>

                                <td style="text-align:left; padding:0;">
                                    <a href="{{ url_for('search_complaint') }}" class="clsupdlink">Search or Update a Complaint</a>
                                </td>
                               <td>

                               </td>
                                <td style="text-align:right; padding:0;">
                                    <div class="btn inline-group">
                                        <input type="reset" value="Clear" class="btn border-rounded clsbtn">
                                        {{ form.submit(class="btn border-rounded clsbtn")}}
                                    </div>
                                </td>
                            </tr>
                </table>
        </form>
    </div>
{% endblock content %}